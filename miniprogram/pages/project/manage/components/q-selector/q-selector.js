"use strict";
var __assign = (this && this.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
Object.defineProperty(exports, "__esModule", { value: true });
Component({
    properties: {
        questionList: {
            type: Array,
            value: [],
        },
    },
    data: {
        qList: [],
        selectCount: 0,
    },
    lifetimes: {
        attached: function () {
            this.setData({
                qList: this.data.questionList,
            });
            this.setSelectCount(this.data.questionList);
        },
        detached: function () {
        },
    },
    observers: {
        "qList": function (a) {
            this.setSelectCount(a);
        },
    },
    methods: {
        setSelectCount: function (qList) {
            if (!qList)
                qList = this.data.qList;
            var count = qList.filter(function (i) { return !i.isUnChecked; }).length;
            this.setData({ selectCount: count });
        },
        bindCheckedChange: function (e) {
            var index = e.currentTarget.dataset.index;
            var qList = this.data.qList;
            var currentQues = qList[index];
            currentQues.isUnChecked = !currentQues.isUnChecked;
            qList[index] = currentQues;
            this.setData({
                qList: qList,
            });
        },
        onTapCheckAll: function (e) {
            var qList = this.data.qList;
            var map = { all: false, clear: true };
            var type = e.currentTarget.dataset.type;
            var isUnChecked = map[type];
            var newList = qList.map(function (item) {
                var newItem = __assign({}, item);
                newItem.isUnChecked = isUnChecked;
                return newItem;
            });
            this.setData({
                qList: newList,
            });
        },
        onTapSelectMark: function (e) {
            var qList = this.data.qList;
            var map = { all: false, clear: true };
            var type = e.currentTarget.dataset.type;
            var isUnChecked = map[type];
            var newList = qList.map(function (item) {
                var newItem = __assign({}, item);
                if (item.isMark) {
                    newItem.isUnChecked = isUnChecked;
                }
                return newItem;
            });
            this.setData({
                qList: newList,
            });
        },
        onTapReverse: function () {
            var qList = this.data.qList;
            var newList = qList.map(function (item) {
                var newItem = __assign({}, item);
                newItem.isUnChecked = !newItem.isUnChecked;
                return newItem;
            });
            this.setData({
                qList: newList,
            });
        },
        onOk: function () {
            this.triggerEvent("finish", this.data.qList);
            this.onBack();
        },
        onBack: function () {
            this.triggerEvent("close");
        },
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicS1zZWxlY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInEtc2VsZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUVBLFNBQVMsQ0FBQztJQUNOLFVBQVUsRUFBRTtRQUNSLFlBQVksRUFBRTtZQUNWLElBQUksRUFBRSxLQUFLO1lBQ1gsS0FBSyxFQUFFLEVBQUU7U0FDWjtLQUNKO0lBQ0QsSUFBSSxFQUFFO1FBQ0YsS0FBSyxFQUFzQixFQUFFO1FBQzdCLFdBQVcsRUFBRSxDQUFDO0tBQ2pCO0lBQ0QsU0FBUyxFQUFFO1FBQ1AsUUFBUSxFQUFFO1lBQ04sSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDVCxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZO2FBQ2hDLENBQUMsQ0FBQztZQUNILElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNoRCxDQUFDO1FBQ0QsUUFBUSxFQUFFO1FBRVYsQ0FBQztLQUNKO0lBQ0QsU0FBUyxFQUFFO1FBQ1AsT0FBTyxFQUFFLFVBQVMsQ0FBcUI7WUFDbkMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQixDQUFDO0tBQ0o7SUFDRCxPQUFPLEVBQUU7UUFDTCxjQUFjLEVBQUUsVUFBUyxLQUEwQjtZQUMvQyxJQUFJLENBQUMsS0FBSztnQkFBRSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDcEMsSUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxVQUFBLENBQUMsSUFBSSxPQUFBLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBZCxDQUFjLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFDdkQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDO1FBQ3ZDLENBQUM7UUFDRCxpQkFBaUIsRUFBRSxVQUFTLENB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aW9uTGlzdEl0ZW19IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlscy91dGlsXCI7XHJcblxyXG5Db21wb25lbnQoe1xyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHF1ZXN0aW9uTGlzdDoge1xyXG4gICAgICAgICAgICB0eXBlOiBBcnJheSxcclxuICAgICAgICAgICAgdmFsdWU6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgZGF0YToge1xyXG4gICAgICAgIHFMaXN0OiA8UXVlc3Rpb25MaXN0SXRlbVtdPltdLFxyXG4gICAgICAgIHNlbGVjdENvdW50OiAwLFxyXG4gICAgfSxcclxuICAgIGxpZmV0aW1lczoge1xyXG4gICAgICAgIGF0dGFjaGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICAgICAgICAgIHFMaXN0OiB0aGlzLmRhdGEucXVlc3Rpb25MaXN0LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RDb3VudCh0aGlzLmRhdGEucXVlc3Rpb25MaXN0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldGFjaGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8g5Zyo57uE5Lu25a6e5L6L6KKr5LuO6aG16Z2i6IqC54K55qCR56e76Zmk5pe25omn6KGMXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBvYnNlcnZlcnM6IHtcclxuICAgICAgICBcInFMaXN0XCI6IGZ1bmN0aW9uKGE6IFF1ZXN0aW9uTGlzdEl0ZW1bXSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFNlbGVjdENvdW50KGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgbWV0aG9kczoge1xyXG4gICAgICAgIHNldFNlbGVjdENvdW50OiBmdW5jdGlvbihxTGlzdD86IFF1ZXN0aW9uTGlzdEl0ZW1bXSkge1xyXG4gICAgICAgICAgICBpZiAoIXFMaXN0KSBxTGlzdCA9IHRoaXMuZGF0YS5xTGlzdDtcclxuICAgICAgICAgICAgY29uc3QgY291bnQgPSBxTGlzdC5maWx0ZXIoaSA9PiAhaS5pc1VuQ2hlY2tlZCkubGVuZ3RoO1xyXG4gICAgICAgICAgICB0aGlzLnNldERhdGEoe3NlbGVjdENvdW50OiBjb3VudH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmluZENoZWNrZWRDaGFuZ2U6IGZ1bmN0aW9uKGU6IGFueSkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LmluZGV4O1xyXG4gICAgICAgICAgICBjb25zdCB7cUxpc3R9ID0gdGhpcy5kYXRhO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UXVlcyA9IHFMaXN0W2luZGV4XTtcclxuICAgICAgICAgICAgY3VycmVudFF1ZXMuaXNVbkNoZWNrZWQgPSAhY3VycmVudFF1ZXMuaXNVbkNoZWNrZWQ7XHJcbiAgICAgICAgICAgIHFMaXN0W2luZGV4XSA9IGN1cnJlbnRRdWVzO1xyXG4gICAgICAgICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgcUxpc3QsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8g5YWo6YCJ5oiW5YWo5LiN6YCJXHJcbiAgICAgICAgb25UYXBDaGVja0FsbDogZnVuY3Rpb24oZTogYW55KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtxTGlzdH0gPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcCA9IHthbGw6IGZhbHNlLCBjbGVhcjogdHJ1ZX07XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGU6IGtleW9mIHR5cGVvZiBtYXAgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlO1xyXG4gICAgICAgICAgICBjb25zdCBpc1VuQ2hlY2tlZCA9IG1hcFt0eXBlXTtcclxuICAgICAgICAgICAgY29uc3QgbmV3TGlzdCA9IHFMaXN0Lm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7Li4uaXRlbX07XHJcbiAgICAgICAgICAgICAgICBuZXdJdGVtLmlzVW5DaGVja2VkID0gaXNVbkNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3SXRlbTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICBxTGlzdDogbmV3TGlzdCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyDpgInkuK3lj5bmtojlt7LmoIforrBcclxuICAgICAgICBvblRhcFNlbGVjdE1hcms6IGZ1bmN0aW9uKGU6IGFueSkge1xyXG4gICAgICAgICAgICBjb25zdCB7cUxpc3R9ID0gdGhpcy5kYXRhO1xyXG4gICAgICAgICAgICBjb25zdCBtYXAgPSB7YWxsOiBmYWxzZSwgY2xlYXI6IHRydWV9O1xyXG4gICAgICAgICAgICBjb25zdCB0eXBlOiBrZXlvZiB0eXBlb2YgbWFwID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZTtcclxuICAgICAgICAgICAgY29uc3QgaXNVbkNoZWNrZWQgPSBtYXBbdHlwZV07XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0xpc3QgPSBxTGlzdC5tYXAoaXRlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdJdGVtID0gey4uLml0ZW19O1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNNYXJrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SXRlbS5pc1VuQ2hlY2tlZCA9IGlzVW5DaGVja2VkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld0l0ZW07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgcUxpc3Q6IG5ld0xpc3QsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25UYXBSZXZlcnNlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29uc3Qge3FMaXN0fSA9IHRoaXMuZGF0YTtcclxuICAgICAgICAgICAgY29uc3QgbmV3TGlzdCA9IHFMaXN0Lm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7Li4uaXRlbX07XHJcbiAgICAgICAgICAgICAgICBuZXdJdGVtLmlzVW5DaGVja2VkID0gIW5ld0l0ZW0uaXNVbkNoZWNrZWQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3SXRlbTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgICAgICBxTGlzdDogbmV3TGlzdCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbk9rOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8g56ys5LqM5Liq5Y+C5pWw5pivZGV0YWlsXHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckV2ZW50KFwiZmluaXNoXCIsIHRoaXMuZGF0YS5xTGlzdCk7XHJcbiAgICAgICAgICAgIHRoaXMub25CYWNrKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkJhY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJFdmVudChcImNsb3NlXCIpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG59KTtcclxuIl19