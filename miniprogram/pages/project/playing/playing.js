"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = require("../../../utils/util");
Component({
    properties: {
        questionList: {
            type: Array,
            value: [],
        },
        setting: {
            type: Object,
            value: {},
        },
    },
    data: {
        title: "",
        qList: [],
        currentQuestion: {},
        inputValue: "",
        isShowAnswer: false,
        isRightRemove: false,
    },
    lifetimes: {
        attached: function () {
            this.init();
        },
        detached: function () {
            this.onHide();
        },
    },
    pageLifetimes: {
        hide: function () {
        },
    },
    methods: {
        init: function () {
            var _this = this;
            var qList = this.data.questionList.filter(function (item) { return !item.isUnChecked; });
            if (!qList.length) {
                wx.showModal({
                    title: '提示',
                    content: '请至少勾选一个',
                    success: function (res) {
                        if (res.confirm) {
                            console.log('用户点击确定');
                        }
                        else if (res.cancel) {
                            console.log('用户点击取消');
                        }
                        _this.onTapMask();
                    },
                });
                return false;
            }
            this.setData({ qList: qList }, function () {
                _this.switchQuestion();
            });
            return true;
        },
        onHide: function () {
            this.triggerEvent("finish", this.data.questionList);
        },
        onTapMask: function () {
            this.triggerEvent('close');
        },
        onTapConfirm: function () {
            var _this = this;
            var _a = this.data, inputValue = _a.inputValue, qList = _a.qList, currentQuestion = _a.currentQuestion, setting = _a.setting, isRightRemove = _a.isRightRemove;
            var answer = currentQuestion.answer, question = currentQuestion.question;
            var value = setting.isReverse ? question : answer;
            if (setting.ignoreUpLow) {
                value = value.toLowerCase();
                inputValue = inputValue.toLowerCase();
            }
            if (value === inputValue) {
                wx.showToast({ icon: "success", title: "回答正确", duration: 700 });
                if (isRightRemove) {
                    var questionList = this.data.questionList;
                    var index = questionList.findIndex(function (item) { return item.question === question; });
                    currentQuestion.isUnChecked = true;
                    questionList[index] = currentQuestion;
                    if (!this.init()) {
                        return;
                    }
                }
                if (qList.length) {
                    this.switchQuestion();
                }
                else {
                    console.log("回答完毕");
                    wx.showModal({
                        title: "提示",
                        content: "是否重来？",
                        success: function () {
                            _this.init();
                        },
                    });
                }
            }
            else {
                wx.showToast({ icon: "none", title: "回答错误" });
                this.setData({ inputValue: "" });
            }
        },
        switchQuestion: function (pushItem) {
            var qList = this.data.qList;
            var randIndex = util_1.randomNumber(qList.length - 1);
            if (!qList.length) {
                wx.showToast({ icon: "none", title: "没有可切换的问题" });
                return;
            }
            var cq = qList.splice(randIndex, 1)[0];
            if (pushItem) {
                qList.push(pushItem);
            }
            this.setData({ inputValue: "", currentQuestion: cq, qList: qList, isShowAnswer: false });
        },
        onTapJump: function () {
            var currentQuestion = this.data.currentQuestion;
            this.switchQuestion(currentQuestion);
        },
        onTapShowAnswer: function () {
            this.setData({ isShowAnswer: !this.data.isShowAnswer });
        },
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGxheWluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInBsYXlpbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSw0Q0FBZ0Y7QUFFaEYsU0FBUyxDQUFDO0lBQ04sVUFBVSxFQUFFO1FBQ1IsWUFBWSxFQUFFO1lBQ1YsSUFBSSxFQUFFLEtBQUs7WUFDWCxLQUFLLEVBQUUsRUFBRTtTQUNaO1FBQ0QsT0FBTyxFQUFFO1lBQ0wsSUFBSSxFQUFFLE1BQU07WUFDWixLQUFLLEVBQWUsRUFBRTtTQUN6QjtLQUNKO0lBQ0QsSUFBSSxFQUFFO1FBQ0YsS0FBSyxFQUFFLEVBQUU7UUFDVCxLQUFLLEVBQXNCLEVBQUU7UUFDN0IsZUFBZSxFQUFvQixFQUFFO1FBQ3JDLFVBQVUsRUFBRSxFQUFFO1FBQ2QsWUFBWSxFQUFFLEtBQUs7UUFFbkIsYUFBYSxFQUFFLEtBQUs7S0FDdkI7SUFDRCxTQUFTLEVBQUU7UUFDUCxRQUFRLEVBQUU7WUFDTixJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDaEIsQ0FBQztRQUNELFFBQVEsRUFBRTtZQUVOLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNsQixDQUFDO0tBQ0o7SUFDRCxhQUFhLEVBQUU7UUFDWCxJQUFJLEVBQUU7UUFFTixDQUFDO0tBQ0o7SUFDRCxPQUFPLEVBQUU7UUFDTCxJQUFJLEVBQUU7WUFBQSxpQkFxQkw7WUFwQkcsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFqQixDQUFpQixDQUFDLENBQUM7WUFDdkUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUU7Z0JBQ2YsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFDVCxLQUFLLEVBQUUsSUFBSTtvQkFDWCxPQUFPLEVBQUUsU0FBUztvQkFDbEIsT0FBTyxFQUFFLFVBQUMsR0FBRzt3QkFDVCxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUU7NEJBQ2IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQzt5QkFDekI7NkJBQU0sSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFOzRCQUNuQixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO3lCQUN6Qjt3QkFDRCxLQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7b0JBQ3JCLENBQUM7aUJBQ0osQ0FBQyxDQUFDO2dCQUNILE9BQU8sS0FBSyxDQUFDO2FBQ2hCO1lBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFDLEtBQUssT0FBQSxFQUFDLEVBQUU7Z0JBQ2xCLEtBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUMxQixDQUFDLENBQUMsQ0FBQztZQUNILE9BQU8sSUFBSSxDQUFDO1FBQ2hCLENBQUM7UUFFRCxNQUFNO1lBRUYsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN4RCxDQUFDO1FBQ0QsU0FBUyxFQUFFO1lBQ1AsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvQixDQUFDO1FBQ0QsWUFBWSxFQUFFO1lBQUEsaUJBeUNiO1lBeENPLElBQUEsY0FBd0UsRUFBdkUsMEJBQVUsRUFBRSxnQkFBSyxFQUFFLG9DQUFlLEVBQUUsb0JBQU8sRUFBRSxnQ0FBMEIsQ0FBQztZQUN0RSxJQUFBLCtCQUFNLEVBQUUsbUNBQVEsQ0FBb0I7WUFDM0MsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFFbEQsSUFBSSxPQUFPLENBQUMsV0FBVyxFQUFFO2dCQUNyQixLQUFLLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUM1QixVQUFVLEdBQUcsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO2FBQ3pDO1lBQ0QsSUFBSSxLQUFLLEtBQUssVUFBVSxFQUFFO2dCQUN0QixFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUFDO2dCQUU5RCxJQUFJLGFBQWEsRUFBRTtvQkFDUixJQUFBLHFDQUFZLENBQWM7b0JBQ2pDLElBQU0sS0FBSyxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxJQUFJLENBQUMsUUFBUSxLQUFLLFFBQVEsRUFBMUIsQ0FBMEIsQ0FBQyxDQUFDO29CQUN6RSxlQUFlLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztvQkFDbkMsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLGVBQWUsQ0FBQztvQkFLdEMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTt3QkFDZCxPQUFPO3FCQUNWO2lCQUNKO2dCQUNELElBQUksS0FBSyxDQUFDLE1BQU0sRUFBRTtvQkFDZCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7aUJBQ3pCO3FCQUFNO29CQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ3BCLEVBQUUsQ0FBQyxTQUFTLENBQUM7d0JBQ1QsS0FBSyxFQUFFLElBQUk7d0JBQ1gsT0FBTyxFQUFFLE9BQU87d0JBQ2hCLE9BQU8sRUFBRTs0QkFDTCxLQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7d0JBQ2hCLENBQUM7cUJBQ0osQ0FBQyxDQUFDO2lCQUNOO2FBQ0o7aUJBQU07Z0JBQ0gsRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUM7Z0JBQzVDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBQyxVQUFVLEVBQUUsRUFBRSxFQUFDLENBQUMsQ0FBQzthQUNsQztRQUNMLENBQUM7UUFDRCxjQUFjLEVBQUUsVUFBUyxRQUEyQjtZQUN6QyxJQUFBLHVCQUFLLENBQWM7WUFDMUIsSUFBTSxTQUFTLEdBQUcsbUJBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO2dCQUNmLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUMsQ0FBQyxDQUFDO2dCQUNoRCxPQUFPO2FBQ1Y7WUFDRCxJQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV6QyxJQUFJLFFBQVEsRUFBRTtnQkFDVixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQ3hCO1lBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsZUFBZSxFQUFFLEVBQUUsRUFBRSxLQUFLLE9BQUEsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQztRQUNwRixDQUFDO1FBQ0QsU0FBUyxFQUFFO1lBQ0EsSUFBQSwyQ0FBZSxDQUFjO1lBQ3BDLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDekMsQ0FBQztRQUNELGVBQWUsRUFBRTtZQUNiLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBQyxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7UUFDMUQsQ0FBQztLQUNKO0NBRUosQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLWlnbm9yZVxyXG5pbXBvcnQge1BsYXlTZXR0aW5nLCBRdWVzdGlvbkxpc3RJdGVtLCByYW5kb21OdW1iZXJ9IGZyb20gXCIuLi8uLi8uLi91dGlscy91dGlsXCI7XHJcblxyXG5Db21wb25lbnQoe1xyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHF1ZXN0aW9uTGlzdDoge1xyXG4gICAgICAgICAgICB0eXBlOiBBcnJheSxcclxuICAgICAgICAgICAgdmFsdWU6IFtdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dGluZzoge1xyXG4gICAgICAgICAgICB0eXBlOiBPYmplY3QsXHJcbiAgICAgICAgICAgIHZhbHVlOiA8UGxheVNldHRpbmc+e30sXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgICAgdGl0bGU6IFwiXCIsXHJcbiAgICAgICAgcUxpc3Q6IDxRdWVzdGlvbkxpc3RJdGVtW10+W10sXHJcbiAgICAgICAgY3VycmVudFF1ZXN0aW9uOiA8UXVlc3Rpb25MaXN0SXRlbT57fSxcclxuICAgICAgICBpbnB1dFZhbHVlOiBcIlwiLFxyXG4gICAgICAgIGlzU2hvd0Fuc3dlcjogZmFsc2UsXHJcbiAgICAgICAgLy8g5Zue562U5q2j56Gu5pe25Y675o6J5Yu+6YCJXHJcbiAgICAgICAgaXNSaWdodFJlbW92ZTogZmFsc2UsXHJcbiAgICB9LFxyXG4gICAgbGlmZXRpbWVzOiB7XHJcbiAgICAgICAgYXR0YWNoZWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldGFjaGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8g5Zyo57uE5Lu25a6e5L6L6KKr5LuO6aG16Z2i6IqC54K55qCR56e76Zmk5pe25omn6KGMXHJcbiAgICAgICAgICAgIHRoaXMub25IaWRlKCk7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBwYWdlTGlmZXRpbWVzOiB7XHJcbiAgICAgICAgaGlkZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMub25IaWRlKClcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuICAgIG1ldGhvZHM6IHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgcUxpc3QgPSB0aGlzLmRhdGEucXVlc3Rpb25MaXN0LmZpbHRlcihpdGVtID0+ICFpdGVtLmlzVW5DaGVja2VkKTtcclxuICAgICAgICAgICAgaWYgKCFxTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHd4LnNob3dNb2RhbCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLonLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICfor7foh7PlsJHli77pgInkuIDkuKonLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb25maXJtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn55So5oi354K55Ye756Gu5a6aJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmNhbmNlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+eUqOaIt+eCueWHu+WPlua2iCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25UYXBNYXNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSh7cUxpc3R9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaFF1ZXN0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIOWLvumAieetlOWvueenu+mZpOaPkOS6pOS6i+S7tlxyXG4gICAgICAgIG9uSGlkZSgpIHtcclxuICAgICAgICAgICAgLy8g5bqU6K+l5Yik5pat5piv5ZCm5pyJ5LiN5LiA5qC355qE5omN6Kem5Y+RZmluaXNo5LqL5Lu2LOi/memHjOavj+asoeenu+mZpOaXtumDveS8muinpuWPkVxyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJFdmVudChcImZpbmlzaFwiLCB0aGlzLmRhdGEucXVlc3Rpb25MaXN0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uVGFwTWFzazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckV2ZW50KCdjbG9zZScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25UYXBDb25maXJtOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbGV0IHtpbnB1dFZhbHVlLCBxTGlzdCwgY3VycmVudFF1ZXN0aW9uLCBzZXR0aW5nLCBpc1JpZ2h0UmVtb3ZlfSA9IHRoaXMuZGF0YTtcclxuICAgICAgICAgICAgY29uc3Qge2Fuc3dlciwgcXVlc3Rpb259ID0gY3VycmVudFF1ZXN0aW9uO1xyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBzZXR0aW5nLmlzUmV2ZXJzZSA/IHF1ZXN0aW9uIDogYW5zd2VyO1xyXG4gICAgICAgICAgICAvLyDlv73nlaXlpKflsI/lhplcclxuICAgICAgICAgICAgaWYgKHNldHRpbmcuaWdub3JlVXBMb3cpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIGlucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBpbnB1dFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB3eC5zaG93VG9hc3Qoe2ljb246IFwic3VjY2Vzc1wiLCB0aXRsZTogXCLlm57nrZTmraPnoa5cIiwgZHVyYXRpb246IDcwMH0pO1xyXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5Yu+6YCJ562U5a+556e76Zmk55qE6K+dXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNSaWdodFJlbW92ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHtxdWVzdGlvbkxpc3R9ID0gdGhpcy5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcXVlc3Rpb25MaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0ucXVlc3Rpb24gPT09IHF1ZXN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UXVlc3Rpb24uaXNVbkNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uTGlzdFtpbmRleF0gPSBjdXJyZW50UXVlc3Rpb247XHJcbiAgICAgICAgICAgICAgICAgICAgLyp0aGlzLnNldERhdGEoe3F1ZXN0aW9uTGlzdH0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluaXQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHFMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoUXVlc3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlm57nrZTlrozmr5VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgd3guc2hvd01vZGFsKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi5o+Q56S6XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwi5piv5ZCm6YeN5p2l77yfXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd3guc2hvd1RvYXN0KHtpY29uOiBcIm5vbmVcIiwgdGl0bGU6IFwi5Zue562U6ZSZ6K+vXCJ9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0YSh7aW5wdXRWYWx1ZTogXCJcIn0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzd2l0Y2hRdWVzdGlvbjogZnVuY3Rpb24ocHVzaEl0ZW0/OiBRdWVzdGlvbkxpc3RJdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtxTGlzdH0gPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhbmRJbmRleCA9IHJhbmRvbU51bWJlcihxTGlzdC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgaWYgKCFxTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHd4LnNob3dUb2FzdCh7aWNvbjogXCJub25lXCIsIHRpdGxlOiBcIuayoeacieWPr+WIh+aNoueahOmXrumimFwifSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgY3EgPSBxTGlzdC5zcGxpY2UocmFuZEluZGV4LCAxKVswXTtcclxuICAgICAgICAgICAgLy8g6KGl5LiK5Y67XHJcbiAgICAgICAgICAgIGlmIChwdXNoSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcUxpc3QucHVzaChwdXNoSXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZXREYXRhKHtpbnB1dFZhbHVlOiBcIlwiLCBjdXJyZW50UXVlc3Rpb246IGNxLCBxTGlzdCwgaXNTaG93QW5zd2VyOiBmYWxzZX0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25UYXBKdW1wOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29uc3Qge2N1cnJlbnRRdWVzdGlvbn0gPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgICAgIHRoaXMuc3dpdGNoUXVlc3Rpb24oY3VycmVudFF1ZXN0aW9uKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uVGFwU2hvd0Fuc3dlcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSh7aXNTaG93QW5zd2VyOiAhdGhpcy5kYXRhLmlzU2hvd0Fuc3dlcn0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxufSk7XHJcbiJdfQ==